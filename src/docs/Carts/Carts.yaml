paths:
  /api/carts/:
    get:
      summary: Get all carts
      tags:
        - Carts
      responses:
        "200":
          description: Carts get successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Cart"
        "500":
          description: Internal server error
    post:
      summary: Add a Cart
      tags:
        - Carts
      responses:
        "201":
          description: Cart created successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "500":
          description: Internal server error
  /api/carts/{cid}:
    get:
      summary: Get a Cart by the Id
      tags:
        - Carts
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
      responses:
        "200":
          description: Cart obtained through its Id successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "404":
         description: Error to get a cart
        "500":
          description: Internal server error
    put:
      summary: Update a Cart by the Id
      tags:
        - Carts
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
      requestBody:
        description: Cart update information
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Cart'
      responses:
        "200":
          description: Cart updated through its Id successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "500":
          description: Internal server error
    delete:
      summary: Delete a Cart by the Id
      tags:
        - Carts
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
      responses:
        "200":
          description: Cart deleted through its Id successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "404":
         description: Error to delete a cart
        "500":
          description: Internal server error
  /api/carts/{cid}/products/{pid}:
    post:
      summary: Add a product in the Cart through its respective Ids
      tags:
        - Carts
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
        - name: pid
          in: path
          required: true
          schema:
            $type: String
          description: Product specific Mongo autogenerated Id
      requestBody:
        description: Cart update information
        example: {"quantity": (int number)}
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Cart'
      responses:
        "200":
          description: Product added successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "500":
          description: Internal server error
    put:
      summary: Update product in the Cart through its respective Ids
      tags:
        - Carts
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
        - name: pid
          in: path
          required: true
          schema:
            $type: String
          description: Product specific Mongo autogenerated Id
      requestBody:
        description: Cart update information
        example: {"quantity": (int number)}
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Cart'
      responses:
        "200":
          description: Product updated successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "404":
         description: Error to update the cart
        "500":
          description: Internal server error
    delete:
      summary: Delete product in the Cart through its respective Ids
      tags:
        - Carts
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
        - name: pid
          in: path
          required: true
          schema:
            $type: String
          description: Product specific Mongo autogenerated Id
      responses:
        "200":
          description: Product deleted successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Cart"
        "404":
         description: Error to delete product
        "500":
          description: Internal server error
  /api/carts/{cid}/purchase:
    post:
      summary: Generate a ticket for User Cart by the Id
      tags:
        - Ticket
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            $type: String
          description: Cart specific Mongo autogenerated Id
      responses:
        "200":
          description: Ticket generated successfully
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/Ticket"
        "500":
          description: Internal server error   
components:
  schemas:
    Cart:
      type: object
      properties:
        _id:
          type: string
          description: Cart specific Mongo autogenerated Id
        products:
          type: array
          items:
            $ref: "#/components/schemas/Products"
      example:
        _id: "89sd7f98sd7f9s7f98sd7f98sd7f"
        products:
          - id_prod: "982374hn2398ju0202d2i7i27"
            quantity: 5
          - id_prod: "jhi2398h8h9238h2h3h8h23h"
            quantity: 3
    Products:
      type: object
      properties:
        id_prod:
          type: string
          description: Product Id referenced Mongo autogenerated Id
        quantity:
          type: number
          description: Cart's amount of each product
      example:
        id_prod: "982374hn2398ju0202d2i7i27"
        quantity: 5
    Ticket:
      type: object
      properties:
        code:
          type: string
          description: Unique identification code of the ticket
        purchase_datetime:
          type: string
          description: Date and time of purchase
        amount:
          type: number
          description: Total amount of purchase
        purchaser:
          type: string
          description: User email
      example:
        code: "uuus_6k4b2gefaebg_5uw2c42il6u"
        purchase_datetime: "Martes 31 de Octubre de 2023 hora: 12:32:33"
        amount: 2776
        purchaser: "marujulieta@mail.com"
